{
    "openapi": "3.0.0",
    "info": {
        "description": "Production-ready API gateway for VM lifecycle management with multi-tenant authentication, billing, and audit logging.",
        "title": "HOPX Public API",
        "termsOfService": "https://hopx.dev/terms",
        "contact": {
            "name": "HOPX Support",
            "url": "https://hopx.dev/support",
            "email": "support@hopx.dev"
        },
        "license": {
            "name": "Proprietary",
            "url": "https://hopx.dev/license"
        },
        "version": "2025-10-21"
    },
    "paths": {
        "/health": {
            "get": {
                "description": "Check if the API is healthy and responsive",
                "tags": [
                    "System"
                ],
                "summary": "Health check",
                "responses": {
                    "200": {
                        "description": "API is healthy",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/sandboxes": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "List all sandboxes for the authenticated organization with optional filters",
                "tags": [
                    "Sandboxes"
                ],
                "summary": "List sandboxes",
                "parameters": [
                    {
                        "description": "Number of results to return (max 100)",
                        "name": "limit",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "default": 100
                        }
                    },
                    {
                        "description": "Filter by status (running, stopped, paused, creating)",
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "description": "Filter by region",
                        "name": "region",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of sandboxes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/internal_api.SandboxList"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Create a new VM sandbox from a template with specified resources",
                "tags": [
                    "Sandboxes"
                ],
                "summary": "Create sandbox",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/internal_api.CreateSandboxRequest"
                            }
                        }
                    },
                    "description": "Sandbox creation parameters",
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Sandbox created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/github_com_hopx_publicapi_pkg_models.Sandbox"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request parameters",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized - invalid or missing API key",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "402": {
                        "description": "Payment required - insufficient credits",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Service unavailable - no nodes available",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/sandboxes/{id}": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Get details of a specific sandbox by ID",
                "tags": [
                    "Sandboxes"
                ],
                "summary": "Get sandbox",
                "parameters": [
                    {
                        "description": "Sandbox ID",
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Sandbox details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/github_com_hopx_publicapi_pkg_models.Sandbox"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Sandbox not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Permanently delete a sandbox and stop billing",
                "tags": [
                    "Sandboxes"
                ],
                "summary": "Delete sandbox",
                "parameters": [
                    {
                        "description": "Sandbox ID",
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Sandbox deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Sandbox not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/sandboxes/{id}/pause": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Pause a running sandbox (reduces billing to paused rate)",
                "tags": [
                    "Sandboxes"
                ],
                "summary": "Pause sandbox",
                "parameters": [
                    {
                        "description": "Sandbox ID",
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Sandbox paused successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Sandbox not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/sandboxes/{id}/resume": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Resume a paused sandbox (restores to running state and billing)",
                "tags": [
                    "Sandboxes"
                ],
                "summary": "Resume sandbox",
                "parameters": [
                    {
                        "description": "Sandbox ID",
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Sandbox resumed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Sandbox not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/sandboxes/{id}/start": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Start a stopped sandbox",
                "tags": [
                    "Sandboxes"
                ],
                "summary": "Start sandbox",
                "parameters": [
                    {
                        "description": "Sandbox ID",
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Sandbox started successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Sandbox not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/sandboxes/{id}/stop": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Stop a running sandbox",
                "tags": [
                    "Sandboxes"
                ],
                "summary": "Stop sandbox",
                "parameters": [
                    {
                        "description": "Sandbox ID",
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Sandbox stopped successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Sandbox not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/sandboxes/{id}/timeout": {
            "put": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Set or update the auto-kill timeout for a sandbox",
                "tags": [
                    "Sandboxes"
                ],
                "summary": "Set sandbox timeout",
                "parameters": [
                    {
                        "description": "Sandbox ID",
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/internal_api.SetTimeoutRequest"
                            }
                        }
                    },
                    "description": "Timeout configuration",
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Timeout updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/sandboxes/{id}/token/refresh": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Refresh the JWT authentication token for direct VM agent access",
                "tags": [
                    "Sandboxes"
                ],
                "summary": "Refresh sandbox JWT token",
                "parameters": [
                    {
                        "description": "Sandbox ID",
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Token refreshed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Sandbox not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/templates": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "List all available VM templates (public and organization-specific)",
                "tags": [
                    "Templates"
                ],
                "summary": "List templates",
                "responses": {
                    "200": {
                        "description": "List of templates",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/internal_api.TemplateList"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/templates/build": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Trigger a new template build with specified configuration and steps",
                "tags": [
                    "Templates"
                ],
                "summary": "Trigger template build",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/internal_api.TemplateBuildRequest"
                            }
                        }
                    },
                    "description": "Template build configuration",
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Build started successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/internal_api.TemplateBuildResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Template already exists",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/templates/build/{buildID}/logs": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Stream real-time build logs via Server-Sent Events (SSE)",
                "tags": [
                    "Templates"
                ],
                "summary": "Stream build logs",
                "parameters": [
                    {
                        "description": "Build ID",
                        "name": "buildID",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Event stream of build logs",
                        "content": {
                            "text/event-stream": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "text/event-stream": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Build not found",
                        "content": {
                            "text/event-stream": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "text/event-stream": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/templates/build/{buildID}/status": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Get the current status of a template build operation",
                "tags": [
                    "Templates"
                ],
                "summary": "Get build status",
                "parameters": [
                    {
                        "description": "Build ID",
                        "name": "buildID",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Build status",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/internal_api.BuildStatusResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Build not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/templates/files/upload-link": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Get a presigned URL for uploading template build files to R2/S3",
                "tags": [
                    "Templates"
                ],
                "summary": "Get file upload link",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/internal_api.FileUploadLinkRequest"
                            }
                        }
                    },
                    "description": "File upload request",
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Presigned upload URL",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/internal_api.FileUploadLinkResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/templates/{name}": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Get detailed information about a specific template by name",
                "tags": [
                    "Templates"
                ],
                "summary": "Get template details",
                "parameters": [
                    {
                        "description": "Template name",
                        "name": "name",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Template details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/internal_api.Template"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Template not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/templates/{templateID}": {
            "delete": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Delete a custom template (only organization-owned templates can be deleted)",
                "tags": [
                    "Templates"
                ],
                "summary": "Delete template",
                "parameters": [
                    {
                        "description": "Template ID",
                        "name": "templateID",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Template deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden - cannot delete public templates",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Template not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "tags": [
        {
            "description": "VM lifecycle management endpoints",
            "name": "Sandboxes"
        },
        {
            "description": "Template management and building endpoints",
            "name": "Templates"
        },
        {
            "description": "Authentication and authorization endpoints",
            "name": "Auth"
        },
        {
            "description": "Billing, credits, and payment management",
            "name": "Billing"
        },
        {
            "description": "System health and status endpoints",
            "name": "System"
        }
    ],
    "servers": [
        {
            "url": "//api.hopx.dev"
        }
    ],
    "components": {
        "securitySchemes": {
            "ApiKeyAuth": {
                "description": "API key for authentication (format: sk_live_...)",
                "type": "apiKey",
                "name": "X-API-Key",
                "in": "header"
            },
            "BearerAuth": {
                "description": "JWT Bearer token for authenticated sessions (format: Bearer <token>)",
                "type": "apiKey",
                "name": "Authorization",
                "in": "header"
            }
        },
        "schemas": {
            "github_com_hopx_publicapi_pkg_models.Resources": {
                "type": "object",
                "properties": {
                    "disk_mb": {
                        "type": "integer"
                    },
                    "memory_mb": {
                        "type": "integer"
                    },
                    "vcpu": {
                        "type": "integer"
                    }
                }
            },
            "github_com_hopx_publicapi_pkg_models.Sandbox": {
                "type": "object",
                "properties": {
                    "auth_token": {
                        "description": "JWT Authentication (for VM agent access)",
                        "type": "string"
                    },
                    "created_at": {
                        "type": "string"
                    },
                    "direct_url": {
                        "type": "string"
                    },
                    "expires_at": {
                        "description": "Timestamp when VM will be auto-killed (NULL = no timeout)",
                        "type": "string"
                    },
                    "id": {
                        "type": "string"
                    },
                    "internet_access": {
                        "description": "Whether VM has internet access",
                        "type": "boolean"
                    },
                    "live_mode": {
                        "description": "true for production, false for test",
                        "type": "boolean"
                    },
                    "node_id": {
                        "type": "string"
                    },
                    "object": {
                        "description": "Always \"sandbox\"",
                        "type": "string"
                    },
                    "organization_id": {
                        "type": "integer"
                    },
                    "preview_url": {
                        "type": "string"
                    },
                    "public_host": {
                        "description": "Public hostname for browser access",
                        "type": "string"
                    },
                    "region": {
                        "type": "string"
                    },
                    "request_id": {
                        "description": "Request ID for this operation",
                        "type": "string"
                    },
                    "resources": {
                        "$ref": "#/components/schemas/github_com_hopx_publicapi_pkg_models.Resources"
                    },
                    "status": {
                        "type": "string"
                    },
                    "template_id": {
                        "description": "Numeric template ID (if provided)",
                        "type": "string"
                    },
                    "template_name": {
                        "description": "Human-readable template name",
                        "type": "string"
                    },
                    "timeout_seconds": {
                        "description": "VM auto-kill timeout in seconds (NULL = no timeout)",
                        "type": "integer"
                    },
                    "token_expires_at": {
                        "description": "RFC3339 timestamp when token expires",
                        "type": "string"
                    }
                }
            },
            "internal_api.BuildStatusResponse": {
                "type": "object",
                "properties": {
                    "build_duration_ms": {
                        "type": "integer"
                    },
                    "build_id": {
                        "type": "string"
                    },
                    "completed_at": {
                        "type": "string"
                    },
                    "current_step": {
                        "type": "string"
                    },
                    "error_message": {
                        "type": "string"
                    },
                    "estimated_completion": {
                        "type": "string"
                    },
                    "progress": {
                        "type": "integer"
                    },
                    "request_id": {
                        "type": "string"
                    },
                    "started_at": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "template_id": {
                        "type": "string"
                    }
                }
            },
            "internal_api.CreateSandboxRequest": {
                "type": "object",
                "properties": {
                    "disk_gb": {
                        "type": "integer"
                    },
                    "env_vars": {
                        "description": "Optional: environment variables",
                        "type": "object",
                        "additionalProperties": {
                            "type": "string"
                        }
                    },
                    "internet_access": {
                        "description": "Optional: internet access (default: true)",
                        "type": "boolean"
                    },
                    "memory_mb": {
                        "type": "integer"
                    },
                    "region": {
                        "description": "Optional: us-east, eu-west, etc.",
                        "type": "string"
                    },
                    "template_id": {
                        "description": "Template ID (accepts both string and int)",
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/internal_api.FlexibleTemplateID"
                            }
                        ]
                    },
                    "template_name": {
                        "description": "Template name (either this or template_id required)",
                        "type": "string"
                    },
                    "timeout_seconds": {
                        "description": "Optional: auto-kill after N seconds",
                        "type": "integer"
                    },
                    "vcpu": {
                        "description": "DEPRECATED: No longer supported - resources are always loaded from template",
                        "type": "integer"
                    }
                }
            },
            "internal_api.FileUploadLinkRequest": {
                "type": "object",
                "required": [
                    "content_length",
                    "files_hash"
                ],
                "properties": {
                    "content_length": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "files_hash": {
                        "type": "string"
                    }
                }
            },
            "internal_api.FileUploadLinkResponse": {
                "type": "object",
                "properties": {
                    "expires_at": {
                        "type": "string"
                    },
                    "files_hash": {
                        "description": "Return hash for COPY step",
                        "type": "string"
                    },
                    "present": {
                        "type": "boolean"
                    },
                    "request_id": {
                        "type": "string"
                    },
                    "upload_url": {
                        "type": "string"
                    }
                }
            },
            "internal_api.FlexibleTemplateID": {
                "type": "object",
                "properties": {
                    "value": {
                        "type": "string"
                    }
                }
            },
            "internal_api.RegistryCredentials": {
                "type": "object",
                "properties": {
                    "password": {
                        "type": "string"
                    },
                    "token": {
                        "type": "string"
                    },
                    "type": {
                        "description": "\"basic\", \"github\", \"gitlab\", \"ecr\", \"gcr\"",
                        "type": "string"
                    },
                    "username": {
                        "type": "string"
                    }
                }
            },
            "internal_api.SandboxList": {
                "type": "object",
                "properties": {
                    "data": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/github_com_hopx_publicapi_pkg_models.Sandbox"
                        }
                    },
                    "has_more": {
                        "type": "boolean"
                    },
                    "object": {
                        "type": "string"
                    },
                    "request_id": {
                        "type": "string"
                    },
                    "url": {
                        "type": "string"
                    }
                }
            },
            "internal_api.SetTimeoutRequest": {
                "type": "object",
                "required": [
                    "timeout_seconds"
                ],
                "properties": {
                    "timeout_seconds": {
                        "type": "integer"
                    }
                }
            },
            "internal_api.Template": {
                "type": "object",
                "properties": {
                    "build_id": {
                        "type": "string"
                    },
                    "category": {
                        "type": "string"
                    },
                    "created_at": {
                        "type": "string"
                    },
                    "default_resources": {
                        "$ref": "#/components/schemas/internal_api.TemplateResources"
                    },
                    "description": {
                        "type": "string"
                    },
                    "display_name": {
                        "type": "string"
                    },
                    "docs_url": {
                        "type": "string"
                    },
                    "features": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "fluent_api_config": {
                        "description": "Build configuration (from_image, steps, etc.)",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        }
                    },
                    "icon": {
                        "type": "string"
                    },
                    "id": {
                        "type": "string"
                    },
                    "is_active": {
                        "type": "boolean"
                    },
                    "is_public": {
                        "type": "boolean"
                    },
                    "language": {
                        "type": "string"
                    },
                    "max_resources": {
                        "$ref": "#/components/schemas/internal_api.TemplateResources"
                    },
                    "min_resources": {
                        "$ref": "#/components/schemas/internal_api.TemplateResources"
                    },
                    "name": {
                        "type": "string"
                    },
                    "object": {
                        "type": "string"
                    },
                    "organization_id": {
                        "type": "string"
                    },
                    "popularity_score": {
                        "type": "integer"
                    },
                    "request_id": {
                        "type": "string"
                    },
                    "status": {
                        "description": "pending, building, active, failed, archived",
                        "type": "string"
                    },
                    "tags": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "updated_at": {
                        "type": "string"
                    }
                }
            },
            "internal_api.TemplateBuildRequest": {
                "type": "object",
                "required": [
                    "cpu",
                    "diskGB",
                    "from_image",
                    "memory",
                    "name"
                ],
                "properties": {
                    "agent_version": {
                        "description": "Internal: Agent version override (hidden feature, not documented in public API)",
                        "type": "string"
                    },
                    "cpu": {
                        "description": "REQUIRED",
                        "type": "integer"
                    },
                    "diskGB": {
                        "description": "REQUIRED",
                        "type": "integer"
                    },
                    "from_image": {
                        "description": "Base image (REQUIRED - separate from steps)",
                        "type": "string"
                    },
                    "memory": {
                        "description": "REQUIRED (MB)",
                        "type": "integer"
                    },
                    "name": {
                        "description": "Core fields - ALL REQUIRED, no defaults",
                        "type": "string"
                    },
                    "readyCmd": {},
                    "registry_credentials": {
                        "description": "Private registry support",
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/internal_api.RegistryCredentials"
                            }
                        ]
                    },
                    "skipCache": {
                        "type": "boolean"
                    },
                    "startCmd": {
                        "description": "Optional",
                        "type": "string"
                    },
                    "steps": {
                        "description": "Steps - build steps (RUN, COPY, ENV, WORKDIR, USER, CMD)\nNote: FROM is NOT a step, it's specified in from_image field",
                        "type": "array",
                        "items": {}
                    },
                    "update": {
                        "description": "Update flag",
                        "type": "boolean"
                    }
                }
            },
            "internal_api.TemplateBuildResponse": {
                "type": "object",
                "properties": {
                    "build_id": {
                        "type": "string"
                    },
                    "logs_url": {
                        "type": "string"
                    },
                    "request_id": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "template_id": {
                        "type": "string"
                    }
                }
            },
            "internal_api.TemplateList": {
                "type": "object",
                "properties": {
                    "data": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/internal_api.TemplateListItem"
                        }
                    },
                    "has_more": {
                        "type": "boolean"
                    },
                    "object": {
                        "type": "string"
                    },
                    "request_id": {
                        "type": "string"
                    },
                    "url": {
                        "type": "string"
                    }
                }
            },
            "internal_api.TemplateListItem": {
                "type": "object",
                "properties": {
                    "build_id": {
                        "description": "For logs",
                        "type": "string"
                    },
                    "created_at": {
                        "type": "string"
                    },
                    "default_resources": {
                        "$ref": "#/components/schemas/internal_api.TemplateResources"
                    },
                    "display_name": {
                        "type": "string"
                    },
                    "id": {
                        "type": "string"
                    },
                    "is_public": {
                        "type": "boolean"
                    },
                    "name": {
                        "type": "string"
                    },
                    "object": {
                        "type": "string"
                    },
                    "organization_id": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "updated_at": {
                        "type": "string"
                    }
                }
            },
            "internal_api.TemplateResources": {
                "type": "object",
                "properties": {
                    "disk_gb": {
                        "type": "integer"
                    },
                    "memory_mb": {
                        "type": "integer"
                    },
                    "vcpu": {
                        "type": "integer"
                    }
                }
            }
        }
    }
}